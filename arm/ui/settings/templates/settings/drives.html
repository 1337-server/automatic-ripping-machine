
{% block drives %}
    <div class="container content">
        <div class="row">
            <div class="col pt-3">
                <div class="card mx-auto">
                    <div class="card-header text-center">
                        <strong>Disk Drives</strong>
                    </div>
                    <ul class="list-group list-group-flush">
                        {% if drives %}
                            {% for drive in drives %}
                                <li class="list-group-item">
                                    <div class="container">
                                        <div class="row">
                                            <div class="col-md-8">
                                                <form id="systemForm" name="systemForm" action="/systeminfo" method="post">
                                                    {{ form_drive.hidden_tag() }}
                                                    <div class="form-group row">
                                                        <label for="driveName" class="col-sm-4 col-form-label px-1">Name</label>
                                                        <input class="col-sm-8 form-control form-control-sm px-1" type="text" id="driveName" name="name" value="{{ drive.name }}">
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="type" class="col-sm-4 col-form-label px-1">Type</label>
                                                        <input class="col-sm-8 form-control form-control-sm px-1" type="text" id="type" name="type" value="{{ drive.type }}" readonly>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="mount" class="col-sm-4 col-form-label px-1 px-1">Mount Path</label>
                                                        <input class="col-sm-8 form-control form-control-sm px-1" type="text" id="mount" name="mount" value="{{ drive.mount }}" readonly>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="current_job" class="col-sm-4 col-form-label px-1">Current Job</label>
                                                        {% if drive.job_id_current %}
                                                            <text class="col-sm-8 form-control form-control-sm px-1" id="current_job" readonly>
                                                                <a href="/jobdetail?job_id={{ drive.job_id_current }}">{{ drive.job_current.video_type }} - {{ drive.job_current.title }} - {{ drive.job_current.year }} </a>
                                                            </text>
                                                        {% else %}
                                                            <text class="col-sm-8 form-control form-control-sm px-1" id="current_job" readonly> No current job </text>
                                                        {% endif %}
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="previous_job" class="col-sm-4 col-form-label px-1 px-1">Previous Job</label>
                                                        {% if drive.job_id_previous %}
                                                            <text class="col-sm-8 form-control form-control-sm px-1" id="previous_job" readonly>
                                                                <a href="/jobdetail?job_id={{ drive.job_id_previous }}">{{ drive.job_previous.video_type }} - {{ drive.job_previous.title }} - {{ drive.job_previous.year }} </a>
                                                            </text>
                                                        {% else %}
                                                            <text class="col-sm-8 form-control form-control-sm px-1" id="previous_job" readonly> No previous job </text>
                                                        {% endif %}
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="description" class="col-sm-4 col-form-label px-1">Description</label>
                                                        <input class="col-sm-8 form-control form-control-sm px-1" type="text" id="description" name="description" value="{{ drive.description }}">
                                                        <input type="hidden" id="id" name="id" value="{{ drive.drive_id }}">
                                                    </div>
                                                    <div class="form-group row">
                                                        <label for="drive_mode" class="col-sm-4 col-form-label px-1">Drive Mode</label>
                                                        <select id="drive_mode" name="drive_mode" class="col-sm-8 form-control form-control-sm px-1">
                                                            <option value="auto" {% if drive.drive_mode == 'auto' %}selected{% endif %}>Auto</option>
                                                            <option value="manual" {% if drive.drive_mode == 'manual' %}selected{% endif %}>Manual</option>
                                                        </select>
                                                    </div>
                                                    <div class="form-group row">
                                                        <div class="col">
                                                            <div class="float-right">
                                                                <button type="submit" class="btn btn-primary btn-sm" name="submit">Update</button>
                                                                <a href="drive/manual/{{ drive.drive_id }}" class="btn btn-secondary btn-sm">Manual</a>
                                                                <a href="drive/remove/{{ drive.drive_id }}" class="btn btn-outline-danger btn-sm">Remove</a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                            <div class="col-md-2 d-flex">
                                                {% if drive.open %}
                                                    <a href="drive/eject/{{ drive.drive_id }}" class="p-flex align-items-center">
                                                        <img src="static/img/drive-optical_open.svg" style="max-width:100px; min-width:50px" alt="Drive Open">
                                                    </a>
                                                {% else %}
                                                    <a href="drive/eject/{{ drive.drive_id }}" class="p-flex align-items-center">
                                                        <img src="static/img/drive-optical_closed.svg" style="max-width:100px; min-width:50px" alt="Drive Closed">
                                                    </a>
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}
                            </li>
                        {% endfor %}
                    {% else %}
                        <li class="list-group-item">
                            No drives installed on this system.
                        </li>
                    {% endif %}
                    <li class="list-group-item">
                        <a href="systemdrivescan">Scan for Drives</a>
                    </li>
                    </ul>
                    <i><u>Note:</u> Ripping does not require drives to be listed in the UI here. However, if a drive does not show up, there may be an issue with the docker container settings.</i>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
